---
## Front matter
lang: ru-RU
title: Лабораторная работа №5
subtitle: Основы информационной безопасности
author:
  - Кондрашова А. А.
institute:
  - Российский университет дружбы народов, Москва, Россия
  - НПМбд-01-19
date: 6 октября 2022

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'
---


## Цели и задачи

- Изучение механизмов изменения идентификаторов, применения SetUID- и Sticky-битов 
- Получение практических навыков работы в консоли с дополнительными атрибутами 
- Рассмотрение работы механизма смены идентификатора процессов пользователей, а также влияние бита Sticky на запись и удаление файлов.

## Выполнение лабораторной работы

- Вошли в систему от имени пользователя guest2.
- Создали программу simpleid.c.
- Скомплилируйте программу и убедитесь, что файл программы создан с помощью команды gcc simpleid.c -o simpleid.
- Выполните программу simpleid.
- Выполните системную программу id и сравнили полученный нами результат с данными предыдущего пункта. Данные иденичны.

![Выполнение программы simpleid](01.png){ #fig:001 width=70% }

## Выполнение лабораторной работы

- Усложнили программу, добавив вывод действительных идентификаторов.Получившуюся программу назвали simpleid2.c.
- Скомпилируйте и запустили simpleid2.c с помощью команды gcc simpleid2.c -o simpleid2.

![Выполнение программы simpleid2](04.png){ #fig:002 width=70% }

## Выполнение лабораторной работы

- От имени суперпользователя выполнили команды (для этого исползовали повышение своих прав с помощью sudo):
chown root:guest /home/guest/simpleid2
chmod u+s /home/guest/simpleid2
- Выполнили проверку правильности установки новых атрибутов и смены владельца файла simpleid2.
- Запустите simpleid2 и id.

![Выполнение программы simpleid2](4_1.png){ #fig:003 width=70% }

## Выполнение лабораторной работы

- Создали программу readfile.c:
- Откомпилировали её.

![Создание программы readfile.c](05.png){ #fig:004 width=70% }

## Выполнение лабораторной работы

- Сменили владельца у файла readfile.c и изменили права так, чтобы только суперпользователь (root) мог прочитать его, a guest2 не мог.

![Смена прав](07.png){ #fig:005 width=70% }

## Выполнение лабораторной работы

- Проверили, что пользователь guest2 не может прочитать файл readfile.c.

![Проверка невозможности чтения](08.png){ #fig:006 width=70% }

## Выполнение лабораторной работы

- Сменили у программы readfile владельца и установите SetU’D-бит.

![Смена владельца и установка SetU’D-бит](09.png){ #fig:007 width=70% }

## Выполнение лабораторной работы

- Проверили, что программа readfile может прочитать файл readfile.c

![Проверка возможности чтения файла readfile.c](10.png){ #fig:008 width=70% }

## Выполнение лабораторной работы

- Проверьте, что программа readfile может прочитать файл /etc/shadow

![Проверка возможности чтения файла /etc/shadow](11.png){ #fig:009 width=70% }

## Исследование Sticky-бита

- Выяснили, установлен ли атрибут Sticky на директории /tmp, для чего выполнили команду ls -l / | grep tmp
- От имени пользователя guest создали файл file01.txt в директории /tmp со словом test.
- Просмотрели атрибуты у только что созданниого файла и разрешили чтение и запись для категории пользователей «все остальные».

![Атрибуты на директории /tmp и файла file01.txt](12.png){ #fig:010 width=70% }

## Исследование Sticky-бита

- От пользователя guest3 (не являющегося владельцем) попробовали прочитать файл /tmp/file01.txt. Нам это удалось.
- От пользователя guest3 попробовали дозаписать в файл /tmp/file01.txt слово test2. Слово перезаписалось, а не дозаписалось.
- От пользователя guest3 попробовали перезаписать в файл /tmp/file01.txt слово test3. Слово перезаписалось.
- От пользователя guest3 попробовали удалить файл /tmp/file01.txt командой
- Повысили свои права до суперпользователя и выполнили после этого команду, снимающую атрибут t (Sticky-бит) с
директории /tmp.

![Выполнение действий с файлом file01.txt](13.png){ #fig:011 width=70% }

## Исследование Sticky-бита

- От пользователя guest3 проверили, что атрибута t у директории /tmp нет.
- Повторили предыдущие шаги, удалось удалить файл.
- Повысили свои права до суперпользователя и вернули атрибут t на директорию /tmp:

![Атрибут t](14.png){ #fig:012 width=70% }

## Выводы

Изучили механизмы изменения идентификаторов, применения SetUID- и Sticky-битов. Получили практические навыки работы в консоли с дополнительными атрибутами. Рассмотрели работы механизма смены идентификатора процессов пользователей, а также влияние бита Sticky на запись и удаление файлов.

